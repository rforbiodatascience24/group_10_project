---
title: "03_augment"
format: html
editor: visual
---

## Quarto

```{r}
library(tidyverse)
library(dplyr)
library(readr)
```

Application, name_API, Side_Effects skal t√¶lles og have en count kolonne for hver.

use clean_data3

```{r}
# defining the augment (this shoudl be done when loading )
clean_data <- clean_data
```

#### Augmenting data by adding count variables for 'Side_Effects', 'API' and 'Application'.

It is of interest how many side effects each person has experienced for the different drugs, in order to investigate whether some drugs might carry a higher amount than others, as well as certain combination of drugs. Therefore, a new variables is made, counting the amount of side effects and API for each observation. Furthermore, the count of application is made into a new variables as well, for each observation.

```{r}
aug_clean_data <- clean_data |>
  
  # Counting for each row, as nr. of side effects might differ
  rowwise() |>
  
  # mutating in order to make SE_count variable with sum of Column containing SE in         header as this refer to side       effects listed for each row 
  mutate(Side_Effects_count = sum(!is.na(c_across(contains("Side_Effects_")))), 
         API_count = sum(!is.na(c_across(contains("name_API_")))),
         Application_count = sum(!is.na(c_across(contains("Application_")))))

          
```

To ensure the new variables are included in the augmented cleaned data set, the data is viewed. This is done using the view() function.

```{r}
view(aug_clean_data)
```
